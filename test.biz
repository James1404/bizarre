fn factorial(n: i32) i32 {
      return if n < 2 {
             1
      } else {
             n * factorial(n - 1)
      };
};

/*
0 = fn {
    args = [
        "n" = cfg {
        bb0:
          %0 = load "i32";
           return %0;
        }
    ]
    return = cfg {
    bb0:
       %0 = load "i32";
       return %0;
    }
    body = cfg {
    bb0:
        %0 = load_arg "n";
        %1 = int(2);
        %2 = %0 < %1;
        if %2 then goto bb1 else goto bb2;
    bb1:
        %3 = int(1);
        goto bb3 [%3];
    bb2:
        %4 = load_arg "n";
        %5 = load_arg "n";
        %6 = int(1);
        %7 = %5 - %6;
        %8 = load "factorial";
        %9 = call(%8, [%7]);
        %10 = %4 * %9;
        goto bb3 [%10];
    bb3 (arg):
        return arg;
    }
}

"factorial" = cfg {
bb0:
    %0 = fn_ref(0);
    return %0;
}
*/